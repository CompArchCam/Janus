<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<title>DynamoRIO API: _drreg_options_t Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO API
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('struct__drreg__options__t.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">_drreg_options_t Struct Reference<div class="ingroups"><a class="el" href="group__drreg.html">Register Usage Coordinator</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;drreg.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a8bc71c47c70c0ac240cb6c75822f619d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__drreg__options__t.html#a8bc71c47c70c0ac240cb6c75822f619d">struct_size</a></td></tr>
<tr class="separator:a8bc71c47c70c0ac240cb6c75822f619d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bbbd6b9f361d671cec4c6bd0142259d"><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__drreg__options__t.html#a6bbbd6b9f361d671cec4c6bd0142259d">num_spill_slots</a></td></tr>
<tr class="separator:a6bbbd6b9f361d671cec4c6bd0142259d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f7789278b96170f6b9345c6bec730b8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__drreg__options__t.html#a3f7789278b96170f6b9345c6bec730b8">conservative</a></td></tr>
<tr class="separator:a3f7789278b96170f6b9345c6bec730b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a290ce7be16fe495f0c7bb521764e44"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__drreg__options__t.html#a3a290ce7be16fe495f0c7bb521764e44">error_callback</a> )(<a class="el" href="group__drreg.html#gad5b7a7a020d7206b11e61e7cdae02ee9">drreg_status_t</a> status)</td></tr>
<tr class="separator:a3a290ce7be16fe495f0c7bb521764e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24b28e18148dfa38d91994024319ebe9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__drreg__options__t.html#a24b28e18148dfa38d91994024319ebe9">do_not_sum_slots</a></td></tr>
<tr class="separator:a24b28e18148dfa38d91994024319ebe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Specifies the options when initializing drreg. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a3f7789278b96170f6b9345c6bec730b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool _drreg_options_t::conservative</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>By default, drreg assumes that the application will not rely on the particular value of a dead register when a fault happens. This allows drreg to reduce overhead. This flag can be set to request that drreg not make this assumption.</p>
<p>If multiple <a class="el" href="group__drreg.html#ga6656df86f1a73bdf739eedaba7220c46">drreg_init()</a> calls are made, this field is combined by logical OR. </p>

</div>
</div>
<a class="anchor" id="a24b28e18148dfa38d91994024319ebe9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool _drreg_options_t::do_not_sum_slots</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generally, library routines should take in scratch registers directly, keeping drreg reservations in the end client. However, sometimes this model is not sufficient, and a library wants to directly reserve drreg registers or aflags. The library can ensure that drreg is initialized, without forcing the client to do so when the client is not directly using drreg already, by calling <a class="el" href="group__drreg.html#ga6656df86f1a73bdf739eedaba7220c46">drreg_init()</a> and setting <code>do_not_sum_slots</code> to true. This ensures that the total requested slots is at least <code>num_spill_slots</code>, but if the total is already higher than that, the total is left alone.. Thus, if clients invoke <a class="el" href="group__drreg.html#ga6656df86f1a73bdf739eedaba7220c46">drreg_init()</a> on their own, the library will not needlessly add to the number of simultaneous slots needed. </p>

</div>
</div>
<a class="anchor" id="a3a290ce7be16fe495f0c7bb521764e44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* _drreg_options_t::error_callback) (<a class="el" href="group__drreg.html#gad5b7a7a020d7206b11e61e7cdae02ee9">drreg_status_t</a> status)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Some drreg operations are performed during drmgr events where there is no direct return value to the user of drreg. When an error is encountered at these times, drreg will call this callback and pass the error value. If this callback is NULL, or if it returns false, drreg will call <a class="el" href="dr__tools_8h.html#a12c1ca981b7d3049cb2d31c0f19da332">dr_abort()</a>.</p>
<p>If multiple <a class="el" href="group__drreg.html#ga6656df86f1a73bdf739eedaba7220c46">drreg_init()</a> calls are made, only the first callback is honored (thus, libraries generally should not set this). </p>

</div>
</div>
<a class="anchor" id="a6bbbd6b9f361d671cec4c6bd0142259d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint _drreg_options_t::num_spill_slots</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of TLS spill slots to use. This many slots will be requested from DR via <a class="el" href="dr__tools_8h.html#aea4bc51b4771fceb56f050d0f20cbc99">dr_raw_tls_calloc()</a>. Any slots needed beyond this number will use DR's base slots, which are not allowed to be used across application instructions. DR's slots are also more expensive to access (beyond the first few). This number should be computed as one plus the number of simultaneously used general-purpose register spill slots, as drreg reserves one of the requested slots for arithmetic flag preservation.</p>
<p>For each simultaneous value that will be held in a register across application instructions, an additional slot must be requested for adjusting the saved application value with respect to application reads and writes.</p>
<p>When <a class="el" href="group__drreg.html#ga6656df86f1a73bdf739eedaba7220c46">drreg_init()</a> is called multiple times, the number of slots is summed from each call, unless <code>do_not_sum_slots</code> is specified for that call, in which case a maximum is used rather than a sum. </p>

</div>
</div>
<a class="anchor" id="a8bc71c47c70c0ac240cb6c75822f619d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t _drreg_options_t::struct_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set this to the size of this structure. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="drreg_8h.html">drreg.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="struct__drreg__options__t.html">_drreg_options_t</a></li>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO API version 7.0.0 --- Fri Feb 3 2017 00:37:40 &nbsp; <img border=0 src="favicon.png">
</small></address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
