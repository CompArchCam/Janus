<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<title>DynamoRIO API: Code Coverage Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO API
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_drcovlib.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Code Coverage Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><code>drcovlib</code> is a DynamoRIO Extension that collects code coverage information. If you are looking for an end-user tool, the DynamoRIO tool <a class="el" href="page_drcov.html">Code Coverage Tool</a> combined with the post-processing tool <a class="el" href="page_drcov.html#sec_drcov2lcov">Post-Processing</a> should be used instead of this library. <code>drcovlib</code> is intended to be used to add coverage information to other tools. The <code>drcov</code> client itself makes use of <code>drcovlib</code>.</p>
<ul>
<li><a class="el" href="page_drcovlib.html#sec_drcovlib">The Code Coverage Interface</a></li>
<li><a class="el" href="page_drcovlib.html#sec_elision">Elision Not Supported</a></li>
<li><a class="el" href="page_drcovlib.html#sec_postproc">Post-Processing</a></li>
<li><a class="el" href="page_drcovlib.html#sec_modtrack">Module Tracking Feature</a></li>
</ul>
<h1><a class="anchor" id="sec_drcovlib"></a>
The Code Coverage Interface</h1>
<p>The <code>drcovlib</code> library's basic operation is to capture coverage information during execution and write the results to a single log file for the whole at the end of execution. Per-thread coverage information can be obtained by running DynamoRIO with thread-private code caches and passing the <a class="el" href="group__drcovlib.html#gga4e8b8bfb2b8edf258fa3ccfe99de5b35a2d177716bc8797ec53a7f85604d9271c">DRCOVLIB_THREAD_PRIVATE</a> flag to <a class="el" href="group__drcovlib.html#gaf677d6ab6dbb234a71366b8bc9fafa2e">drcovlib_init()</a>.</p>
<p>Coverage information is finalized to the log file when <a class="el" href="group__drcovlib.html#ga9ae4cea2825fc79abec8b6c0c87855d9">drcovlib_exit()</a> is called (or for <a class="el" href="group__drcovlib.html#gga4e8b8bfb2b8edf258fa3ccfe99de5b35a2d177716bc8797ec53a7f85604d9271c">DRCOVLIB_THREAD_PRIVATE</a> when <code>drcovlib's</code> own thread exit events are invoked by DynamoRIO). For processes that are terminated without a chance for a clean exit by their parents, the caller may want to consider using <a class="el" href="group__drx.html#ga9348e840424caf0098a8b1ba69955864">drx_register_soft_kills()</a> with a soft kill callback that nudges the child process and a nudge event callback that invokes <a class="el" href="dr__tools_8h.html#a364db17ca1ba042f4fa3280b49fb2ad6">dr_exit_process()</a>. This will ensure that log file are written out. If this is not sufficient, <a class="el" href="group__drcovlib.html#ga950d622b84e132eec3efbdd63bde8d1e">drcovlib_dump()</a> is provided, though it should not be called when normal dumping will occur.</p>
<h1><a class="anchor" id="sec_elision"></a>
Elision Not Supported</h1>
<p>The DynamoRIO runtime options -max_elide_jmp and -max_elide_call must be left at their default values of zero. <code>drcovlib</code> does not support setting them to non-zero values.</p>
<h1><a class="anchor" id="sec_postproc"></a>
Post-Processing</h1>
<p>To post-process <code>drcovlib's</code> log files and create human-readable output, see instructinons for running the <code>drcov2lcov</code> utility: <a class="el" href="page_drcov.html#sec_drcov2lcov">Post-Processing</a>.</p>
<h1><a class="anchor" id="sec_modtrack"></a>
Module Tracking Feature</h1>
<p>In addition to code coverage, <code>drcovlib</code> provides a module (library) tracking feature that is useful for using an index and an offset as a persistent representation of the location of an application program counter for later symbolization. This feature handles unloaded and reloaded libraries and offers fast lookup. The module information can be written to a file and read back in either online or offline using DR's standalone API via the drmodtrack_offline_* interface. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO API version 7.0.0 --- Fri Feb 3 2017 00:37:40 &nbsp; <img border=0 src="favicon.png">
</small></address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
