<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<title>DynamoRIO API: DynamoRIO eXtension utilities</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO API
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__drx.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DynamoRIO eXtension utilities</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga1c12b3b71826d8b412f25a0059fd2017"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga1c12b3b71826d8b412f25a0059fd2017">DRX_FILE_SKIP_OPEN</a>&#160;&#160;&#160;0x8000</td></tr>
<tr class="separator:ga1c12b3b71826d8b412f25a0059fd2017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0645733e06c68e965ccc9e7c3126d438"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga0645733e06c68e965ccc9e7c3126d438">DRMGR_PRIORITY_NAME_DRX_BUF_INIT</a>&#160;&#160;&#160;&quot;drx_buf.init&quot;</td></tr>
<tr class="separator:ga0645733e06c68e965ccc9e7c3126d438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ddda40d50adc634c87223c1dd474a3e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga6ddda40d50adc634c87223c1dd474a3e">DRMGR_PRIORITY_NAME_DRX_BUF_EXIT</a>&#160;&#160;&#160;&quot;drx_buf.exit&quot;</td></tr>
<tr class="separator:ga6ddda40d50adc634c87223c1dd474a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga8006198d0e3f3f85df687e9286de597c"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga8006198d0e3f3f85df687e9286de597c">drx_buf_full_cb_t</a>) (void *drcontext, void *buf_base, size_t size)</td></tr>
<tr class="separator:ga8006198d0e3f3f85df687e9286de597c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga839a0a82cdb05bc4285369d905e3daaf"><td class="memItemLeft" align="right" valign="top">typedef struct _drx_buf_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a></td></tr>
<tr class="separator:ga839a0a82cdb05bc4285369d905e3daaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga16685eea158879e41b101ca3634de462"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="group__drx.html#gga16685eea158879e41b101ca3634de462a507636af18a8858c214066682d013a1a">DRX_COUNTER_64BIT</a> = 0x01, 
<br />
&#160;&#160;<a class="el" href="group__drx.html#gga16685eea158879e41b101ca3634de462aa45e32a1d62398b84858de6759364688">DRX_COUNTER_LOCK</a> = 0x10
<br />
 }<tr class="separator:ga16685eea158879e41b101ca3634de462"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
<tr class="memitem:ga2970898e8a43ce21e1cc510d49f1b89d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="group__drx.html#gga2970898e8a43ce21e1cc510d49f1b89da72c2469ba268615b188959b3ffbef685">DRX_BUF_FAST_CIRCULAR_BUFSZ</a> = (1&lt;&lt;16)
 }<tr class="separator:ga2970898e8a43ce21e1cc510d49f1b89d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
<tr class="memitem:gafa231099d07583c3ed0981e0bb665f55"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="group__drx.html#ggafa231099d07583c3ed0981e0bb665f55ad97fe2f57b9c6ec96fd3b8461b0cfeb1">DRMGR_PRIORITY_THREAD_INIT_DRX_BUF</a> = -7500, 
<br />
&#160;&#160;<a class="el" href="group__drx.html#ggafa231099d07583c3ed0981e0bb665f55a2c71daa1f7dc4665d5e32997578809c0">DRMGR_PRIORITY_THREAD_EXIT_DRX_BUF</a> = -7500
<br />
 }<tr class="separator:gafa231099d07583c3ed0981e0bb665f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae0665a86427616ffc80c59375649e283"><td class="memItemLeft" align="right" valign="top">DR_EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#gae0665a86427616ffc80c59375649e283">drx_init</a> (void)</td></tr>
<tr class="separator:gae0665a86427616ffc80c59375649e283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga996c662c089046984b64a627500748f5"><td class="memItemLeft" align="right" valign="top">DR_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga996c662c089046984b64a627500748f5">drx_exit</a> (void)</td></tr>
<tr class="separator:ga996c662c089046984b64a627500748f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3189cbfbf85d5c32965bd8a140b2c35e"><td class="memItemLeft" align="right" valign="top">DR_EXPORT ptr_uint_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga3189cbfbf85d5c32965bd8a140b2c35e">drx_reserve_note_range</a> (size_t size)</td></tr>
<tr class="separator:ga3189cbfbf85d5c32965bd8a140b2c35e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae33a91872caa46e430d5d721af6d8c82"><td class="memItemLeft" align="right" valign="top">DR_EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#gae33a91872caa46e430d5d721af6d8c82">drx_aflags_are_dead</a> (<a class="el" href="structinstr__t.html">instr_t</a> *where)</td></tr>
<tr class="separator:gae33a91872caa46e430d5d721af6d8c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5eba10b0f9536c1a108d796e0b84c4cd"><td class="memItemLeft" align="right" valign="top">DR_EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga5eba10b0f9536c1a108d796e0b84c4cd">drx_insert_counter_update</a> (void *drcontext, instrlist_t *ilist, <a class="el" href="structinstr__t.html">instr_t</a> *where, <a class="el" href="dr__ir__utils_8h.html#a89a6b714ff24d91d78589877047a29b9">dr_spill_slot_t</a> slot, IF_NOT_X86_(<a class="el" href="dr__ir__utils_8h.html#a89a6b714ff24d91d78589877047a29b9">dr_spill_slot_t</a> slot2) void *addr, int value, uint flags)</td></tr>
<tr class="separator:ga5eba10b0f9536c1a108d796e0b84c4cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9348e840424caf0098a8b1ba69955864"><td class="memItemLeft" align="right" valign="top">DR_EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga9348e840424caf0098a8b1ba69955864">drx_register_soft_kills</a> (bool(*event_cb)(process_id_t pid, int exit_code))</td></tr>
<tr class="separator:ga9348e840424caf0098a8b1ba69955864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0a5fcca247de11374c3555a5326cba8"><td class="memItemLeft" align="right" valign="top">DR_EXPORT file_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#gaa0a5fcca247de11374c3555a5326cba8">drx_open_unique_file</a> (const char *dir, const char *prefix, const char *suffix, uint extra_flags, char *result OUT, size_t result_len)</td></tr>
<tr class="separator:gaa0a5fcca247de11374c3555a5326cba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa85537dd6726928bbd43a21dc8211a53"><td class="memItemLeft" align="right" valign="top">DR_EXPORT file_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#gaa85537dd6726928bbd43a21dc8211a53">drx_open_unique_appid_file</a> (const char *dir, ptr_int_t id, const char *prefix, const char *suffix, uint extra_flags, char *result OUT, size_t result_len)</td></tr>
<tr class="separator:gaa85537dd6726928bbd43a21dc8211a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafdcaedde814b3ff345686c6a3abf879c"><td class="memItemLeft" align="right" valign="top">DR_EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#gafdcaedde814b3ff345686c6a3abf879c">drx_open_unique_appid_dir</a> (const char *dir, ptr_int_t id, const char *prefix, const char *suffix, char *result OUT, size_t result_len)</td></tr>
<tr class="separator:gafdcaedde814b3ff345686c6a3abf879c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4caa3e50a3cfb5ecb5c08e65fc44ada3"><td class="memItemLeft" align="right" valign="top">DR_EXPORT <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga4caa3e50a3cfb5ecb5c08e65fc44ada3">drx_buf_create_circular_buffer</a> (size_t buf_size)</td></tr>
<tr class="separator:ga4caa3e50a3cfb5ecb5c08e65fc44ada3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26d48f2339de13a75bfe21b5fd04a6c7"><td class="memItemLeft" align="right" valign="top">DR_EXPORT <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga26d48f2339de13a75bfe21b5fd04a6c7">drx_buf_create_trace_buffer</a> (size_t buffer_size, <a class="el" href="group__drx.html#ga8006198d0e3f3f85df687e9286de597c">drx_buf_full_cb_t</a> full_cb)</td></tr>
<tr class="separator:ga26d48f2339de13a75bfe21b5fd04a6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1182ac061717e3244891e43dab2a7d23"><td class="memItemLeft" align="right" valign="top">DR_EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga1182ac061717e3244891e43dab2a7d23">drx_buf_free</a> (<a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *buf)</td></tr>
<tr class="separator:ga1182ac061717e3244891e43dab2a7d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42f82cda96d7ee9c3236ab520f192d96"><td class="memItemLeft" align="right" valign="top">DR_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga42f82cda96d7ee9c3236ab520f192d96">drx_buf_insert_load_buf_ptr</a> (void *drcontext, <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *buf, instrlist_t *ilist, <a class="el" href="structinstr__t.html">instr_t</a> *where, <a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a> buf_ptr)</td></tr>
<tr class="separator:ga42f82cda96d7ee9c3236ab520f192d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga187d0c9f694b5bbd97a509c72c3cccf6"><td class="memItemLeft" align="right" valign="top">DR_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga187d0c9f694b5bbd97a509c72c3cccf6">drx_buf_insert_update_buf_ptr</a> (void *drcontext, <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *buf, instrlist_t *ilist, <a class="el" href="structinstr__t.html">instr_t</a> *where, <a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a> buf_ptr, <a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a> scratch, ushort stride)</td></tr>
<tr class="separator:ga187d0c9f694b5bbd97a509c72c3cccf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga707a2f43fd22d2203d1274a498e7cf8b"><td class="memItemLeft" align="right" valign="top">DR_EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga707a2f43fd22d2203d1274a498e7cf8b">drx_buf_insert_buf_store</a> (void *drcontext, <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *buf, instrlist_t *ilist, <a class="el" href="structinstr__t.html">instr_t</a> *where, <a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a> buf_ptr, <a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a> scratch, <a class="el" href="structopnd__t.html">opnd_t</a> opnd, <a class="el" href="dr__ir__opnd_8h.html#a74a13beec75b515dee3dffd3a12110ff">opnd_size_t</a> opsz, short offset)</td></tr>
<tr class="separator:ga707a2f43fd22d2203d1274a498e7cf8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d46be87bc7b8ebd470609250347740f"><td class="memItemLeft" align="right" valign="top">DR_EXPORT void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga6d46be87bc7b8ebd470609250347740f">drx_buf_get_buffer_ptr</a> (void *drcontext, <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *buf)</td></tr>
<tr class="separator:ga6d46be87bc7b8ebd470609250347740f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22218727d86b15b625a9d0f5729b9955"><td class="memItemLeft" align="right" valign="top">DR_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga22218727d86b15b625a9d0f5729b9955">drx_buf_set_buffer_ptr</a> (void *drcontext, <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *buf, void *new_ptr)</td></tr>
<tr class="separator:ga22218727d86b15b625a9d0f5729b9955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab387ef4cf4e739dba536149361d3b6c2"><td class="memItemLeft" align="right" valign="top">DR_EXPORT void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#gab387ef4cf4e739dba536149361d3b6c2">drx_buf_get_buffer_base</a> (void *drcontext, <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *buf)</td></tr>
<tr class="separator:gab387ef4cf4e739dba536149361d3b6c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cf71b198fcd63f42e35df44285ceec3"><td class="memItemLeft" align="right" valign="top">DR_EXPORT size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga2cf71b198fcd63f42e35df44285ceec3">drx_buf_get_buffer_size</a> (void *drcontext, <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *buf)</td></tr>
<tr class="separator:ga2cf71b198fcd63f42e35df44285ceec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f9c7628a63632568aaeb62beeb3a89a"><td class="memItemLeft" align="right" valign="top">DR_EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drx.html#ga8f9c7628a63632568aaeb62beeb3a89a">drx_tail_pad_block</a> (void *drcontext, instrlist_t *ilist)</td></tr>
<tr class="separator:ga8f9c7628a63632568aaeb62beeb3a89a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga6ddda40d50adc634c87223c1dd474a3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DRMGR_PRIORITY_NAME_DRX_BUF_EXIT&#160;&#160;&#160;&quot;drx_buf.exit&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Name of drx_buf thread exit priority for buffer cleanup and full_cb callback. </p>

</div>
</div>
<a class="anchor" id="ga0645733e06c68e965ccc9e7c3126d438"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DRMGR_PRIORITY_NAME_DRX_BUF_INIT&#160;&#160;&#160;&quot;drx_buf.init&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Name of drx_buf thread init priority for buffer initialization. </p>

</div>
</div>
<a class="anchor" id="ga1c12b3b71826d8b412f25a0059fd2017"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DRX_FILE_SKIP_OPEN&#160;&#160;&#160;0x8000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag for use with <a class="el" href="group__drx.html#gaa0a5fcca247de11374c3555a5326cba8">drx_open_unique_file()</a> or <a class="el" href="group__drx.html#gaa85537dd6726928bbd43a21dc8211a53">drx_open_unique_appid_file()</a> in <code>extra_flags</code> to skip the file open and get the path string only.</p>
<dl class="section note"><dt>Note</dt><dd>This flag value must not conflict with any DR_FILE_* flag value used by <a class="el" href="dr__tools_8h.html#ae3ae2190774a204af207602791a32cb6">dr_open_file()</a>. </dd></dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga8006198d0e3f3f85df687e9286de597c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* drx_buf_full_cb_t) (void *drcontext, void *buf_base, size_t size)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback for <code>drx_buf_init_trace_buffer()</code>, called when the buffer has been filled. The valid buffer data is contained within the interval [buf_base..buf_base+size). </p>

</div>
</div>
<a class="anchor" id="ga839a0a82cdb05bc4285369d905e3daaf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct _drx_buf_t <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opaque handle which represents a buffer for use by the drx_buf framework. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga16685eea158879e41b101ca3634de462"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flags for <code>drx_insert_counter_update</code> </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga16685eea158879e41b101ca3634de462a507636af18a8858c214066682d013a1a"></a>DRX_COUNTER_64BIT&#160;</td><td class="fielddoc">
<p>64-bit counter is used for update. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga16685eea158879e41b101ca3634de462aa45e32a1d62398b84858de6759364688"></a>DRX_COUNTER_LOCK&#160;</td><td class="fielddoc">
<p>Counter update is atomic. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="ga2970898e8a43ce21e1cc510d49f1b89d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga2970898e8a43ce21e1cc510d49f1b89da72c2469ba268615b188959b3ffbef685"></a>DRX_BUF_FAST_CIRCULAR_BUFSZ&#160;</td><td class="fielddoc">
<p>Buffer size to be specified in <a class="el" href="group__drx.html#ga4caa3e50a3cfb5ecb5c08e65fc44ada3">drx_buf_create_circular_buffer()</a> in order to make use of the fast circular buffer optimization. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="gafa231099d07583c3ed0981e0bb665f55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Priorities of drmgr instrumentation passes used by drx_buf. Users of drx_buf can use the names <a class="el" href="group__drx.html#ga0645733e06c68e965ccc9e7c3126d438">DRMGR_PRIORITY_NAME_DRX_BUF_INIT</a> and <a class="el" href="group__drx.html#ga6ddda40d50adc634c87223c1dd474a3e">DRMGR_PRIORITY_NAME_DRX_BUF_EXIT</a> in the <a class="el" href="struct__drmgr__priority__t.html#ac73be551eedc5f37043fb752b30eec32">drmgr_priority_t.before</a> field or can use these numeric priorities in the <a class="el" href="struct__drmgr__priority__t.html#a2e46fa4cbefc2dc32f3bc73e8bd82d3e">drmgr_priority_t.priority</a> field to ensure proper instrumentation pass ordering. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggafa231099d07583c3ed0981e0bb665f55ad97fe2f57b9c6ec96fd3b8461b0cfeb1"></a>DRMGR_PRIORITY_THREAD_INIT_DRX_BUF&#160;</td><td class="fielddoc">
<p>Priority of drx_buf thread init event </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggafa231099d07583c3ed0981e0bb665f55a2c71daa1f7dc4665d5e32997578809c0"></a>DRMGR_PRIORITY_THREAD_EXIT_DRX_BUF&#160;</td><td class="fielddoc">
<p>Priority of drx_buf thread exit event </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae33a91872caa46e430d5d721af6d8c82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT bool drx_aflags_are_dead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinstr__t.html">instr_t</a> *&#160;</td>
          <td class="paramname"><em>where</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Analyze if arithmetic flags are dead after (including) instruction <code>where</code>.</p>
<dl class="section note"><dt>Note</dt><dd>May be called without calling <a class="el" href="group__drx.html#gae0665a86427616ffc80c59375649e283">drx_init()</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4caa3e50a3cfb5ecb5c08e65fc44ada3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a>* drx_buf_create_circular_buffer </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buf_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the drx_buf extension with a circular buffer which wraps around when full.</p>
<dl class="section note"><dt>Note</dt><dd>All buffer sizes are supported. However, a buffer size of <a class="el" href="group__drx.html#gga2970898e8a43ce21e1cc510d49f1b89da72c2469ba268615b188959b3ffbef685">DRX_BUF_FAST_CIRCULAR_BUFSZ</a> bytes is specially optimized for performance. This buffer is referred to explicitly in the documentation as the "fast
circular buffer".</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>NULL if unsuccessful, a valid opaque struct pointer if successful. </dd></dl>

</div>
</div>
<a class="anchor" id="ga26d48f2339de13a75bfe21b5fd04a6c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT <a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a>* drx_buf_create_trace_buffer </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga8006198d0e3f3f85df687e9286de597c">drx_buf_full_cb_t</a>&#160;</td>
          <td class="paramname"><em>full_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the drx_buf extension with a buffer; <code>full_cb</code> is called when the buffer becomes full.</p>
<dl class="section return"><dt>Returns</dt><dd>NULL if unsuccessful, a valid opaque struct pointer if successful. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1182ac061717e3244891e43dab2a7d23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT bool drx_buf_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cleans up the buffer associated with <code>buf</code>. </p><dl class="section return"><dt>Returns</dt><dd>whether successful. </dd></dl>

</div>
</div>
<a class="anchor" id="gab387ef4cf4e739dba536149361d3b6c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT void* drx_buf_get_buffer_base </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves a pointer to the base of the buffer. </p>

</div>
</div>
<a class="anchor" id="ga6d46be87bc7b8ebd470609250347740f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT void* drx_buf_get_buffer_ptr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves a pointer to the top of the buffer, that is, returns the same value as would an invocation of <a class="el" href="group__drx.html#ga42f82cda96d7ee9c3236ab520f192d96">drx_buf_insert_load_buf_ptr()</a>. </p>

</div>
</div>
<a class="anchor" id="ga2cf71b198fcd63f42e35df44285ceec3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT size_t drx_buf_get_buffer_size </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the capacity of the buffer. </p>

</div>
</div>
<a class="anchor" id="ga707a2f43fd22d2203d1274a498e7cf8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT bool drx_buf_insert_buf_store </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">instrlist_t *&#160;</td>
          <td class="paramname"><em>ilist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinstr__t.html">instr_t</a> *&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a>&#160;</td>
          <td class="paramname"><em>buf_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a>&#160;</td>
          <td class="paramname"><em>scratch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structopnd__t.html">opnd_t</a>&#160;</td>
          <td class="paramname"><em>opnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__ir__opnd_8h.html#a74a13beec75b515dee3dffd3a12110ff">opnd_size_t</a>&#160;</td>
          <td class="paramname"><em>opsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inserts instructions to store <code>opsz</code> bytes of <code>opnd</code> at <code>offset</code> bytes from <code>buf_ptr</code>. <code>opnd</code> must be a register or an immediate opnd of some appropriate size. </p><dl class="section return"><dt>Returns</dt><dd>whether successful.</dd></dl>
<dl class="section note"><dt>Note</dt><dd><code>opsz</code> must be either <code>OPSZ_1</code>, <code>OPSZ_2</code>, <code>OPSZ_4</code> or <code>OPSZ_8</code>.</dd>
<dd>
<code>scratch</code> is only necessary on ARM when storing an immediate operand.</dd>
<dd>
This method simply wraps a store that also sets an app translation. Make sure that <code>where</code> has a translation set. </dd></dl>

</div>
</div>
<a class="anchor" id="ga42f82cda96d7ee9c3236ab520f192d96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT void drx_buf_insert_load_buf_ptr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">instrlist_t *&#160;</td>
          <td class="paramname"><em>ilist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinstr__t.html">instr_t</a> *&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a>&#160;</td>
          <td class="paramname"><em>buf_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inserts instructions to load the address of the TLS buffer at <code>where</code> into <code>buf_ptr</code>. </p>

</div>
</div>
<a class="anchor" id="ga187d0c9f694b5bbd97a509c72c3cccf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT void drx_buf_insert_update_buf_ptr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">instrlist_t *&#160;</td>
          <td class="paramname"><em>ilist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinstr__t.html">instr_t</a> *&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a>&#160;</td>
          <td class="paramname"><em>buf_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a>&#160;</td>
          <td class="paramname"><em>scratch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>stride</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inserts instructions to increment the buffer pointer by <code>stride</code> to accommodate the writes that occurred since the last time the base pointer was loaded.</p>
<dl class="section note"><dt>Note</dt><dd><code>scratch</code> is only necessary on ARM, in the case of the fast circular buffer. On x86 scratch is completely unused. </dd></dl>

</div>
</div>
<a class="anchor" id="ga22218727d86b15b625a9d0f5729b9955"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT void drx_buf_set_buffer_ptr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__drx.html#ga839a0a82cdb05bc4285369d905e3daaf">drx_buf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>new_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allows one to set the buffer pointer so that subsequent invocations of <a class="el" href="group__drx.html#ga42f82cda96d7ee9c3236ab520f192d96">drx_buf_insert_load_buf_ptr()</a> will use this new value instead. </p>

</div>
</div>
<a class="anchor" id="ga996c662c089046984b64a627500748f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT void drx_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cleans up the drx extension. </p>

</div>
</div>
<a class="anchor" id="gae0665a86427616ffc80c59375649e283"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT bool drx_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the drx extension. Must be called prior to any drx routine that does not explicitly state otherwise. Can be called multiple times (by separate components, normally) but each call must be paired with a corresponding call to <a class="el" href="group__drx.html#ga996c662c089046984b64a627500748f5">drx_exit()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>whether successful. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5eba10b0f9536c1a108d796e0b84c4cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT bool drx_insert_counter_update </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">instrlist_t *&#160;</td>
          <td class="paramname"><em>ilist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinstr__t.html">instr_t</a> *&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__ir__utils_8h.html#a89a6b714ff24d91d78589877047a29b9">dr_spill_slot_t</a>&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IF_NOT_X86_(<a class="el" href="dr__ir__utils_8h.html#a89a6b714ff24d91d78589877047a29b9">dr_spill_slot_t</a> slot2) void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inserts into <code>ilist</code> prior to <code>where</code> meta-instruction(s) to add the constant <code>value</code> to the counter located at <code>addr</code>. Different DRX_COUNTER_* options can be specified by <code>flags</code>.</p>
<p>When used with drmgr, this routine uses the drreg extension. It must be called from drmgr's insertion phase. The drreg extension will be used to spill the arithmetic flags and any scratch registers needed. It is up to the caller to ensure that enough spill slots are available, through drreg's initialization. The slot and slot2 parameters must be set to SPILL_SLOT_MAX+1.</p>
<p>When used without drmgr, the spill slot <code>slot</code> is used for storing arithmetic flags or a scratch register if necessary. The spill slot <code>slot2</code> is used only on ARM for spilling a second scratch register.</p>
<dl class="section return"><dt>Returns</dt><dd>whether successful.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The counter update is racy (i.e., not synchronized among threads) unless <a class="el" href="group__drx.html#gga16685eea158879e41b101ca3634de462aa45e32a1d62398b84858de6759364688">DRX_COUNTER_LOCK</a> is specified in <code>flags</code>. When <a class="el" href="group__drx.html#gga16685eea158879e41b101ca3634de462aa45e32a1d62398b84858de6759364688">DRX_COUNTER_LOCK</a> is set, the instrumentation may fail if a 64-bit counter is updated in a 32-bit application or the counter crosses cache lines.</dd>
<dd>
To update multiple counters at the same place, multiple <a class="el" href="group__drx.html#ga5eba10b0f9536c1a108d796e0b84c4cd">drx_insert_counter_update()</a> invocations should be made in a row with the same <code>where</code> instruction and no other instructions should be inserted in between. In that case, <code>drx</code> will try to merge the instrumentation for better performance. </dd></dl>

</div>
</div>
<a class="anchor" id="gafdcaedde814b3ff345686c6a3abf879c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT bool drx_open_unique_appid_dir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr_int_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *result&#160;</td>
          <td class="paramname"><em>OUT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>result_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new directory with a name constructed from "dir/prefix.appname.id.xxxx.suffix", where xxxx is a 4-digit number incremented until a unique name is found that does not collide with any existing file. The appname string comes from <a class="el" href="dr__tools_8h.html#aace5e8084f523fd25871b31463c7ecda">dr_get_application_name()</a>. The id portion of the string is from <code>id</code>, which is meant to be either the process id or the thread id.</p>
<p>Returns whether successful. On success, optionally returns the resulting path in <code>result</code>.</p>
<dl class="section note"><dt>Note</dt><dd>May be called without calling <a class="el" href="group__drx.html#gae0665a86427616ffc80c59375649e283">drx_init()</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa85537dd6726928bbd43a21dc8211a53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT file_t drx_open_unique_appid_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr_int_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>extra_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *result&#160;</td>
          <td class="paramname"><em>OUT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>result_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens a new file with a name constructed from "dir/prefix.appname.id.xxxx.suffix", where xxxx is a 4-digit number incremented until a unique name is found that does not collide with any existing file. The appname string comes from <a class="el" href="dr__tools_8h.html#aace5e8084f523fd25871b31463c7ecda">dr_get_application_name()</a>. The id portion of the string is from <code>id</code>, which is meant to be either the process id or the thread id.</p>
<p>Passes <code>extra_flags</code> through to the <a class="el" href="dr__tools_8h.html#ae3ae2190774a204af207602791a32cb6">dr_open_file()</a> call if <code>extra_flags</code> is not DRX_FILE_SKIP_OPEN.</p>
<p>On success, returns the file handle and optionally the resulting path in <code>result</code>. On failure, returns INVALID_FILE.</p>
<p>Skips <a class="el" href="dr__tools_8h.html#ae3ae2190774a204af207602791a32cb6">dr_open_file()</a> if <code>extra_flags</code> is DRX_FILE_SKIP_OPEN. Returns INVALID_FILE and optionally the resulting path in <code>result</code>. Unique name is not guaranteed and xxxx is set randomly.</p>
<dl class="section note"><dt>Note</dt><dd>May be called without calling <a class="el" href="group__drx.html#gae0665a86427616ffc80c59375649e283">drx_init()</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa0a5fcca247de11374c3555a5326cba8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT file_t drx_open_unique_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>extra_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *result&#160;</td>
          <td class="paramname"><em>OUT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>result_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens a new file with a name constructed from "dir/prefix.xxxx.suffix", where xxxx is a 4-digit number incremented until a unique name is found that does not collide with any existing file.</p>
<p>Passes <code>extra_flags</code> through to the <a class="el" href="dr__tools_8h.html#ae3ae2190774a204af207602791a32cb6">dr_open_file()</a> call if <code>extra_flags</code> is not DRX_FILE_SKIP_OPEN.</p>
<p>On success, returns the file handle and optionally the resulting path in <code>result</code>. On failure, returns INVALID_FILE.</p>
<p>Skips <a class="el" href="dr__tools_8h.html#ae3ae2190774a204af207602791a32cb6">dr_open_file()</a> if <code>extra_flags</code> is DRX_FILE_SKIP_OPEN. Returns INVALID_FILE and optionally the resulting path in <code>result</code>. Unique name is not guaranteed and xxxx is set randomly.</p>
<dl class="section note"><dt>Note</dt><dd>May be called without calling <a class="el" href="group__drx.html#gae0665a86427616ffc80c59375649e283">drx_init()</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9348e840424caf0098a8b1ba69955864"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT bool drx_register_soft_kills </td>
          <td>(</td>
          <td class="paramtype">bool(*)(process_id_t pid, int exit_code)&#160;</td>
          <td class="paramname"><em>event_cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Registers for the "soft kills" event, which helps to execute process exit events when a process is terminated by another process.</p>
<p>The callback's return value indicates whether to skip the termination action by the application: i.e., true indicates to skip it (the usual case) and false indicates to continue with the application action. In some cases, individually continuing requires emulation when the original application action involved multiple processes.</p>
<p>When there are multiple registered callbacks, if any callback returns true, the application action is skipped.</p>
<p>In normal usage, upon receiving this callback the client will send a nudge (see <a class="el" href="dr__events_8h.html#aa719c9575ca2329c03ab60ef41ba14c6">dr_nudge_client_ex()</a>) to the targeted process. The nudge handler then performs any shutdown actions, such as instrumentation result output. The handler then terminates the target process from within, allowing the callback in the targeting process to skip the termination action. Passing the exit code to the nudge handler is recommended to preserve the intended application exit code.</p>
<p>The nudge handler should support being invoked multiple times (typically by having only the first one take effect) as in some cases a parent process will terminate child processes in multiple ways.</p>
<p>This event must be registered for during process initialization, in order to properly track per-thread information. Un-registering is not supported: soft kills cannot be in effect for only part of the process lifetime.</p>
<p>Soft kills can be risky. If the targeted process is not under DynamoRIO control, the nudge might terminate it, but in a different manner than would have occurred. If the nudge fails for some reason but the targeter's termination is still skipped, the child process might be left alive, causing the application to behave incorrectly.</p>
<p>The implementation of this event uses drmgr's CLS (<a class="el" href="group__drmgr.html#ga933ff32be874004447af771283d0bcee">drmgr_register_cls_field()</a>), which conflicts with <a class="el" href="dr__tools_8h.html#a787aff5df1ded3de8a7ce9f3efef0594">dr_get_tls_field()</a>. A client using this event must use <a class="el" href="group__drmgr.html#ga512b4290d94b1874537e5b604cb27cab">drmgr_register_tls_field()</a> instead of <a class="el" href="dr__tools_8h.html#a787aff5df1ded3de8a7ce9f3efef0594">dr_get_tls_field()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>whether successful. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3189cbfbf85d5c32965bd8a140b2c35e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT ptr_uint_t drx_reserve_note_range </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reserves <code>size</code> values in the namespace for use in the <code>note</code> field of instructions. The reserved range starts at the return value and is contiguous. Returns DRX_NOTE_NONE on failure. Un-reserving is not supported. </p>

</div>
</div>
<a class="anchor" id="ga8f9c7628a63632568aaeb62beeb3a89a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_EXPORT bool drx_tail_pad_block </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">instrlist_t *&#160;</td>
          <td class="paramname"><em>ilist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pads a basic block with a label at the end for routines which rely on inserting instrumentation after every instruction. Note that users of this routine must act on the previous instruction in basic block events before skipping non-app instructions because the label is not marked as an app instruction.</p>
<dl class="section note"><dt>Note</dt><dd>the padding label is not introduced if the basic block is already branch terminated.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>whether padding was introduced. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO API version 7.0.0 --- Fri Feb 3 2017 00:37:40 &nbsp; <img border=0 src="favicon.png">
</small></address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
